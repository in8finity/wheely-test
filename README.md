=== Тестовое задание Wheely ===

Решение задачи:

	1. Из вариантов транспорта для обмена данными с сервисом был выбран протокол HTTP, так как разрабатывает простой сервис без сложных схем взаимодействия и инагрузка минимальная, то его должно хватить.
	2. В качестве формата для запросов к сервису и результатов от него используется MessagePack, так как он экономичнее, чем JSON по времени формирования и разбора, JSON исопльзуется только для отдачи результата в API
	3. Сервис и end-point сделаны на  eventmachine
	4. В качестве хранилища данных используется Redis - время жизни данных по расположению очень мало a значит исползовать персистентное хранение данных смысла нет

Зависимости:
	Redis server v=3.2.4 bits=64 build=40b12d3e51060084
	Используется функция поиска данных

Компоненты:
	1. eta-service - микросервис для расчета времени прибытия такси
	2. public-edpoing - JSON-апи дающий доступ к сервису

Установка и запуск:
	1. Подготовить redis к работе (система ожидает его на redis://127.0.0.1:6379/)
	2. Для каждого компонента одинаково: bundle install
	3. Далее запустить два процесса: bundle exec ruby ./src/server.rb, каждый из директории соответствующего компонента
	4. Далее компоненты доступны по адресам: http://127.0.0.1:8081/ - микросервис, http://127.0.0.1:8080/ - апи эндпоинт

Комментарии:
	В директории benchmarks можно посмотреть результаты тестирования производительности как микро-сервиса так и эндпоинт

	Реализовал кэшироавние по гео-кэшу с точностью ~100 метров (по тестам дает снижение среднего времени обработки запроса с 32 мс до 25 мс )

	К сожалению не успеваю в полном объеме решить задачу, так как сильно стеснен по времени.
	Постарался максимально сосредоточиться на задачах реализующих функциональные требования, понизил приоритет требований касающихся простоты поддержки.

	В планах было:
		1. Вынести параметры конфигурационные файлы
		2. Реализовать тесты для следующих случаев:
			а) Нет машин
			б) Нет доступных машин
			в) Есть машины, но меньше чем нужно
			г) Машина выходит из зоны
			д) Машина входит в зону поиска

	Для последних двух потребовалось бы частично сбрашивать кэш, и реализовать имитацию движения машин

В качетсве протокола передачи можно было бы использовать TCP, избавившись от затрат связанных с HTTP.
Еще рассматривал вариант с использованием соединения через очереди сообщений redis, так как будут установленные соедниения у эндпоинта и у микросервиса, то скорее всего будет одним из самых быстрых вариантов.


В отношении выбора активного такси тоже спорный момент в задании. Я исхожу из того, что доступность такси меняется и об этом другой сервис получает сообщение и в этот же момент добавляет такси в список доступных на карте. Так что фильтрации по доступным такси в коде не нужно, она получаетс автоматически за счет стороннего сервиса и редис.
